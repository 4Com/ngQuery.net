# ngQuery.Net

ngQuery.Net is designed to take the JSON generated from [ngQuery](https://github.com/4Com/ngQuery) and parsing it into an expression tree. This component can also generate the JSON required by ngQuery to generate its options.

##Getting Started

You can find the ngQuery.Net NuGet package on [NuGet](nuget.org) using the following package id: `<tbd>`

Once installed, you can generate the JSON required by ngQuery using the `QueryOptionsBuilder` class as follows:

    var builder = new QueryOptionsBuilder();
    var json = builder.Build<AnAwesomeClass>();

This will generate json similar to the following:

    {
      "topLevelOperators": [
        {
          "displayText": "AND",
          "systemIdentifier": "And"
        },
        {
          "displayText": "OR",
          "systemIdentifier": "Or"
        }
      ],
      "fields": [
        {
          "display": "Id",
          "systemIdentifier": "Id",
          "type": "text",
          "validEntries": [],
          "validOperators": [
            {
              "displayText": "==",
              "systemIdentifier": "Equals"
            },
            {
              "displayText": "!=",
              "systemIdentifier": "NotEquals"
            },
            {
              "displayText": "IN",
              "systemIdentifier": "In"
            },
            {
              "displayText": "NOT IN",
              "systemIdentifier": "NotIn"
            }
          ]
        },
        {
          "display": "CompanyName",
          "systemIdentifier": "CompanyName",
          "type": "text",
          "validEntries": [],
          "validOperators": [
            {
              "displayText": "==",
              "systemIdentifier": "Equals"
            },
            {
              "displayText": "!=",
              "systemIdentifier": "NotEquals"
            },
            {
              "displayText": "IN",
              "systemIdentifier": "In"
            },
            {
              "displayText": "NOT IN",
              "systemIdentifier": "NotIn"
            }
          ]
        }
      ]
    }

nqQuery.Net supports the `DescriptionAttribute` from `System.ComponentModel` namespace, preferring that vs the property name when generating the friendly descriptions for ngQuery. `QueryOptionsBuilder` can take an instance of `IValidEntriesGenerator` which is used to generate the `validEntries` field above. 

After the query has been generated, you can pass the JSON generated by ngQuery to the `ExpressionParser` class. The `ExpressionParser` class is responsible for generating an expression tree which can be passed to any `IQueryable<T>` as part of a `Where()` clause.

As an alternative to this, you can pass an instance of `IRuleExpression` into the `ExpressionParser.GenerateExpression` method. As long as the `IRuleExpression` is either an `IRule` or `IRuleGroup` instance, an expression tree will be generated.
